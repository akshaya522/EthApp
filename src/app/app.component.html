<div>
  <div class="row" class="header">
    <h1 class="margin">Ethereum Scan  <i style="font-size: 2rem; margin-left: 5px" class="pi pi-globe"></i></h1>
  </div>
  <div class="row">
    <div class="col">
      <div class="margin flex">
        <h3>Ethereum Blockchain Explorer</h3>
        <div style="margin-left: 15px">
          <p-autoComplete
            [(ngModel)]="searchVal"
            [suggestions]="searchResult" 
            (completeMethod)="searchBy($event)"
            (onSelect)="searchOnSelect()"
            [field]="searchField"
            placeholder="Search by hash or block number"
            [size]="80"
          >
          </p-autoComplete>
        </div>
      </div>
    </div>
  </div> 

  <div class="row" *ngIf="searchResults.length > 0">
    <div class="full-padding" *ngFor="let res of searchResults">
      <div *ngIf="res.number">
        <app-block-card [block]="res"></app-block-card>
      </div>
      <div *ngIf="!res.number">
        <app-trxn-card [trxn]="res"></app-trxn-card>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="margin col-6">
      <p>Latest Blocks</p>
      <p-table *ngIf="latestBlocks.length > 0"
      [value]="latestBlocks" 
      [paginator]="true" 
      [rows]="5" 
      [showCurrentPageReport]="true" 
      [tableStyle]="{'min-width': '50rem'}"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[5,10,25,50]"
  >
      <ng-template pTemplate="header">
          <tr>
              <th style="width:10%">Block Number</th>
              <th style="width:25%">Fee Recipient</th>
              <th style="width:25%">Timestamp</th>
              <th style="width:10%">Total Difficulty</th>
              <th style="width:10%">Size</th>
              <th style="width:10%">Gas Used</th>
              <th style="width:10%">Gas Limit</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-block>
          <tr>
              <td>{{ block.number }}</td>
              <td>{{ block.feeRecipient }}</td>
              <td>{{ block.timestamp }}</td>
              <td>{{ block.totalDifficulty }}</td>
              <td>{{ block.size }}</td>
              <td>{{ block.gasUsed }}</td>
              <td>{{ block.gasLimit }}</td>
          </tr>
      </ng-template>
  </p-table>
    </div>
    <div class="margin col-6">
      <p>Latest Transactions</p>
      <p-table *ngIf="latestTrans.length > 0"
      [value]="latestTrans" 
      [paginator]="true" 
      [rows]="5" 
      [showCurrentPageReport]="true" 
      [tableStyle]="{'min-width': '50rem'}"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[5,10,25,50]"
  >
      <ng-template pTemplate="header">
          <tr>
              <th style="width:25%">Transaction Hash</th>
              <th style="width:10%">Block</th>
              <th style="width:27.5%">From</th>
              <th style="width:27.5%">To</th>
              <th style="width:10%">Value</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-trxn>
          <tr>
              <td>{{ trxn.hash }}</td>
              <td>{{ trxn.blockNumber }}</td>
              <td>{{ trxn.from }}</td>
              <td>{{ trxn.to }}</td>
              <td>{{ trxn.value }}</td>
          </tr>
      </ng-template>
  </p-table>
    </div>
  </div>
</div>

<p-toast></p-toast>